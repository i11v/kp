jQuery.fn.slide=function(a){var b=new slide(a,$j(this));return jQuery.extend(this,b)};function slide(h,a){var d=function(){var l=this;this.banner=$j("<a>",{"class":"slide"});this.img=$j("<img>",{"class":"img"});this.descr=$j("<span>",{"class":"description"});this.show=function(){l.descr.stop(true,true).delay(g).css({left:"-400px"}).animate({left:"0"},800);l.banner.stop(true,true).css({"z-index":"120",opacity:"0",display:"block"}).animate({opacity:"1"},g)};this.hide=function(){l.descr.stop(true,true).animate({left:"-400px"},800);l.banner.css({"z-index":"100",display:"none"})}};var e=this;var b=0,c=0,g=1200,j=5000,k=null,i=a.find("div.cartridge"),f=a.find("div.navi");this.list=new Array(new d());this.curentSlide=function(){return c};this.play=function(){k=setTimeout(function(){(c+1<b)?e.to(c+1):e.to(0);e.play()},j)};this.stop=function(){clearTimeout(k);k=false};this.to=function(l,m){if(!this.list[c].banner.is(":animated")&&!this.list[l].banner.is(":animated")){if(!m){m=g}f.children().removeClass("on");f.children().eq(l).addClass("on");e.list[c].banner.css({"z-index":"110"});e.list[l].banner.stop().css({"z-index":"120",opacity:"0",display:"block"}).animate({opacity:"1"},m,function(){e.list[c].banner.css({"z-index":"100"});c=l})}};this.next=function(){e.stop();(c+1<b)?e.to(c+1,400):e.to(0,400)};this.prev=function(){e.stop();(c-1>=0)?e.to(c-1,400):e.to(b-1,400)};this.postInit=function(){if(b>1){e.play()}a.trigger("ready")};this.init=function(n){var l=$j("<b>"),o=$j("<div class='progress-box'>").append("<div class='info'>Загрузка...</div>").append($j("<div class='progress-bar'>").append(l)),m=0;data=a.find(".data").children();b=data.length;if(b>0){a.append(o.fadeIn(300));a.addClass("iHave");data.each(function(q){var p=$j(this);e.list[q]=new d();e.list[q].descr.text(p.find("span").text());e.list[q].banner.attr({href:p.attr("href"),title:p.attr("title"),target:p.attr("target"),onclick:p.get(0).getAttribute("onclick")}).append(e.list[q].img);e.list[q].img.attr("src",p.find("span").attr("title")).one("load",function(){i.append(e.list[q].banner);if(q==c){f.show();e.to(c)}m++;l.stop(true,true).animate({width:Math.abs(m*100/b)+"%"},70);if(m==b){o.fadeOut(500,function(){o.remove()});a.trigger("list_ready")}});if(b>1){f.append($j('<i class="icon radio" />').click(function(){e.stop();e.to(q,400)}))}});a.find(".data").remove()}a.one("list_ready",function(){e.postInit()})};this.init(h);return this}$(document).ready(function(){if(document.getElementById("hidden-banner")){$("#hidden-banner").showPopup()}});